import networkx as nx
import matplotlib.pyplot as plt
import powerlaw
import numpy as np
import csv
np.seterr(divide='ignore', invalid='ignore')

file_tf = open('indegree_tensorflow.csv')
reader_tf = csv.reader(file_tf)
next(reader_tf)
degree_sequence_tf = []
for row in reader_tf:
	degree_sequence_tf.append(row[1])

degree_sequence_tf = np.asarray(degree_sequence_tf, dtype=np.int)

dmax = max(degree_sequence_tf)
print(len(set(degree_sequence_tf)))

file_torch = open('indegree_torch.csv')
reader_torch = csv.reader(file_torch)
next(reader_torch)
degree_sequence_torch = []
for row in reader_torch:
	degree_sequence_torch.append(row[1])

degree_sequence_torch = np.asarray(degree_sequence_torch, dtype=np.int)

dmax = max(degree_sequence_torch)
print(len(set(degree_sequence_torch)))

plt.rcParams['figure.figsize'] = (12.0, 6.5)
plt.loglog(np.asarray([i for i in range(1, len(degree_sequence_tf)+1)]), degree_sequence_tf, "b-", marker="o", label='TensorFlow SC', markersize=6)
plt.loglog(np.asarray([i for i in range(1, len(degree_sequence_torch)+1)]), degree_sequence_torch, "r-", marker="s", label='PyTorch SC', markersize=6)
#plt.title("Degree rank plot of the TensorFlow Supply Chain")
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
plt.ylabel("In Degree Centrality + 1", fontsize = 18)
plt.xlabel("Package(Rank)", fontsize = 18)
print(degree_sequence_tf[:3])
print(degree_sequence_torch[:3])

plt.legend(fontsize = 20, loc = 'upper right')
plt.show()
#plt.savefig("in_degree.pdf", bbox_inches='tight')


plt.show()